<launch>
  <!-- Set the path to your xacro file -->
  <arg name="xacro_file" default="$(find kinova_description)/urdf/j2n6s300_standalone.xacro" />

  <!-- Convert the xacro file to URDF -->
  <node name="xacro" pkg="xacro" type="xacro" args="$(arg xacro_file)" output="screen" respawn="false" />

  <!-- Load the robot description -->
  <param name="robot_description" command="$(find xacro)/xacro --inorder $(arg xacro_file)" />

    <include file="$(find kinova_control)/launch/kinova_control.launch">
    <arg name="kinova_robotName" value="j2n6s300"/>
    <arg name="kinova_robotType" value="j2n6s300"/>
    <arg name="use_trajectory_controller" value="true"/>
    <arg name="is7dof" value="false"/>
    <arg name="has2finger" value="false"/>
    <arg name="description_name" value="robot_description"/>
  </include>

<!-- Load the robot description -->
  <param name="robot_description" command="$(find xacro)/xacro --inorder $(arg xacro_file)" />

  <!-- Launch the robot state publisher -->
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" respawn="false" output="screen" />

  <!-- Launch the joint state publisher -->
  <!-- <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" respawn="false" output="screen" /> -->

  <!-- Launch the joint state publisher GUI -->
  <node name="joint_state_publisher_gui" pkg="joint_state_publisher_gui" type="joint_state_publisher_gui" respawn="false" output="screen" />



  <!-- Specify the joint position controller configuration -->
  <param name="joint_position_controller/type" value="position_controllers/JointEffortController" />
  <param name="joint_position_controller/joints" value="j2n6s300_joint_1 j2n6s300_joint_2 j2n6s300_joint_3 j2n6s300_joint_4 j2n6s300_joint_5 j2n6s300_joint_6"/>

      <!-- Add the joint position controller -->
  <node name="joint_position_controller" pkg="controller_manager" type="spawner" respawn="false"
        output="screen" ns="j2ns300" args="joint_position_controller" />

  <!-- Launch RViz and load the robot description -->
  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find kinova_description)/rviz/j2n6s300.rviz" />
</launch>
